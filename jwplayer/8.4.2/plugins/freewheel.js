!function(){var e="freewheel",t="TYPE_SCHEDULE",i="-1",r=15e3,n=15e3,s=4e3,o="jw-flag-ads-freewheel",a="jw-freewheel-before-impression",l="jw-flag-ads-vpaid",d="paused",h="playing",u="adBreakStart",c="adBreakEnd",p="adError",f="adPlay",m="adSkipped",g=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var v=function(){function e(t,i){var o=this;g(this,e),this.config=i;var a={debug:!1,admessage:"This ad will end in xx",admessagedynamickey:"xx",adcounterdynamic:"Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",adcountercountkey:"__AD_POD_CURRENT__",adcountertotalkey:"__AD_POD_LENGTH__",skipMessage:"Skip ad in xx",skipText:"Skip",cuetext:"Advertisement",loadVideoTimeout:n,requestTimeout:r,adBlockTimeout:s};Object.keys(a).forEach(function(e){var t=i[e]||i[e.toLowerCase()],r=a[e],n=typeof r;if(void 0!==t){if("boolean"!==n&&"number"!==n||(t=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseFloat(e);return isNaN(t)?e:t}(t)),typeof t!==n)throw new Error("invalid parameter: "+e+" should be a "+n);o[e]=t}else o[e]=r}),this.admessagedynamic=this.admessage,this.duration=t.duration||0,this.fwassetid=t.fwassetid,this.freewheel=this.config.freewheel||{},this.adManagerURL=this.freewheel.adManagerURL,this.profileid=this.freewheel.profileid,this.sectionid=this.freewheel.sectionid,this.networkid=this.freewheel.networkid,this.serverid=this.freewheel.serverid,this.custom=this.freewheel.custom||{}}return e.prototype.getSchedule=function(){var e=this.config;return e.tag||this.adschedule||e.schedule||e.ad},e.prototype.getAdRules=function(){var e=this.config.rules||{},t=parseInt(e.frequency,10);return{startOn:e.startOn||1,frequency:isNaN(t)?1:t}},e}(),y=null;function _(e,t){if(y)return y;if(window.tv&&tv.freewheel)return y=Promise.resolve();var i=document.location.protocol,r="file:"===i||"https:"===i?"https://mssl.fwmrm.net/p/jw_html5_test/AdManager.js":"http://adm.fwmrm.net/p/vitest-js/AdManager.js",n=new e.scriptloader(t||r);return y=n.load().then(function(){})}var E={};function w(e,t){var i=this,r=E[t];if(r)return r;this.jwplayerEntitlements=function(e,t,i){var r={canPlayAds:!0},n=new e.key(t),s=n.edition();if("unlimited"===s)return i(r);var o=n.token(),a=["//","entitlements.jwplayer.com","/",o,".json"];"file:"===window.location.protocol&&a.unshift("https:"),e.ajax(a.join(""),function(e){r.canPlayAds=!e||!e.response||!1!==e.response.canPlayAds,i(r)},function(){i(r)},{timeout:1e4,responseType:"json"})};return E[t]=new Promise(function(r,n){i.jwplayerEntitlements(e,t,function(e){e.canPlayAds?r():n({message:"Ad Limit Reached"})})})}var A=function(){function e(t,i){g(this,e),t.extend(this,i),this.isMuted=!1,this.vol=0,this.freewheelProxy=null}return e.prototype.setProxy=function(e){this.freewheelProxy=e,this.mute(this.isMuted)},e.prototype.attachMedia=function(){},e.prototype.detachMedia=function(){},e.prototype.mute=function(e){this.isMuted=e,this.freewheelProxy&&this.freewheelProxy.setAdVolume(this.isMuted?0:this.vol)},e.prototype.volume=function(e){this.vol=e/100,this.freewheelProxy&&this.freewheelProxy.setAdVolume(this.vol)},e}();function S(e,t,i){if(!e)return e;for(var r=t.getPlaylistItem(),n=e.replace("__random-number__",Math.random()*Math.pow(10,18)).replace("__timestamp__",(new Date).getTime()).replace("__page-url__",encodeURIComponent(window.location.href)).replace("__referrer__",encodeURIComponent(document.referrer)).replace("__player-height__",t.getHeight()).replace("__player-width__",t.getWidth()).replace("__item-duration__",function(e,t){var i=Math.pow(10,t);return Math.round(e*i)/i}(t.getDuration(),3)).replace("__domain__",encodeURIComponent(function(){var e=window.location.href.match(new RegExp(/^[^/]*:\/\/\/?([^/]*)/));return e&&e.length>1?e[1]:""}())),s=(n=i.companiondiv&&i.companiondiv.id?n.replace("__companion-div__",i.companiondiv.id):n.replace("__companion-div__","")).match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),o=0;s&&o<s.length;o++){var a=s[o],l=a.substring(7,a.length-2);if(r.hasOwnProperty(l)&&t._.isString(r[l])){var d=r[l];d.length>1e3&&(d=d.substring(0,1e3)),n=n.replace(a,encodeURIComponent(d))}else n=n.replace(a,"")}r.title&&-1===n.indexOf("vid_t=")&&(n+=(h=n,(-1!==h.indexOf("?")?"&":"?")+"vid_t="+encodeURIComponent(r.title.substring(0,100))));var h;return n}function T(e,t,i){if("start"===e||"0%"===e)return"pre";if("end"===e||"100%"===e)return"post";if("pre"===e||"post"===e||i.indexOf(e,"%")>-1)return e;var r=t.seconds(e);return!!i.isNumber(r)&&r}function I(e,t,i){var r=T(e,t,i);return r||(r="pre"),i.isNumber(r)&&(r=function(e){var t=parseInt(e,10),i=Math.floor(t)%1e3,r=Math.floor(t/1e3)%60,n=Math.floor(t/6e4)%60,s=Math.floor(t/36e5)%24;return(s=s<10?"0"+s:s)+":"+(n=n<10?"0"+n:n)+":"+(r=r<10?"0"+r:r)+"."+(i=("000"+i).slice(-3))}(1e3*r)),r}var P=function(){function e(t,i){g(this,e),this.player=t,this.options=i}return e.prototype.getTagMap=function(e){var t=this,i=this.player,r=i.utils,n={};return r.foreach(function(e,t,i){var r={};return t.foreach(e,function(e,n){var s={},o=n;n.ad&&(o=n.ad),s.offset=I(o.offset||o.position||n.offset||"",t,i),s.tag=o.tag,o.customadunitname&&(s.customadunitname=o.customadunitname),s.type=o.type||n.type||"linear,nonlinear",o.skipoffset&&(s.skipoffset=o.skipoffset),r[e]=s}),r}(e,r,i._),function(e,s){var o=T(s.offset,r,i._);if(i._.isString(o)&&(o=parseFloat(o.replace("pre","0").replace("post","-1"))),i._.isNumber(o)){var a={tagName:S(s.tag,i,t.options),type:s.type};s.skipoffset&&(a.skipoffset=s.skipoffset),s.customadunitname&&(a.customAdUnitName=s.customadunitname),n[o]=a}}),n},e}(),L={},C=function(){function e(t,i,r){g(this,e),this.responsePromise=null,this.streamType=r,this.adsManager=new tv.freewheel.SDK.AdManager,this.adsManager.setNetwork(i.networkid),this.adsManager.setServer(i.serverid),this.options=i||{},this.version=t,this.schedule=null,this.tagMap={},this._fwassetid=null,this._fwduration=0}return e.prototype.open=function(e,t,i,r){var n=this;if(this.currentAdContext)throw new Error("Request already made");var s=t.getSchedule();if(!s)return this.responsePromise=Promise.reject(),this.responsePromise;L[t.sectionid]||(L[t.sectionid]=Math.floor(2147483648*Math.random()));var o=L[t.sectionid];this.currentAdContext=this.adsManager.newContext(),this.currentAdContext.setProfile(t.profileid);var a=t.freewheel?t.freewheel.sfid:null;if(this.currentAdContext.setSiteSection(t.sectionid,null,o,null,a),this.currentAdContext.addKeyValue("customTargetingKey","JSAMDemoPlayer"),this._fwassetid=t.fwassetid,this._fwduration=t.duration,this.schedule=s,this.responsePromise=new Promise(function(e,t){n.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,e),n.currentAdContext.addEventListener(tv.freewheel.SDK.EVENT_ERROR,t)}),"string"==typeof s)this.currentAdContext.addTemporalSlot(s,tv.freewheel.SDK.ADUNIT_PREROLL,0);else for(var l=new P(i,r),d=this.tagMap=l.getTagMap(s),h=Object.keys(d),u=0;u<h.length;u++){var c=parseInt(h[u]),p=d[c].tagName,f=d[c].customAdUnitName,m=null;if("overlay"===d[c].type){if(-1===c)continue;m=tv.freewheel.SDK.ADUNIT_OVERLAY}if(!m)switch(c){case 0:m=f||tv.freewheel.SDK.ADUNIT_PREROLL;break;case-1:m=f||tv.freewheel.SDK.ADUNIT_POSTROLL,c=this.options.duration||1;break;default:m=f||tv.freewheel.SDK.ADUNIT_MIDROLL}this.currentAdContext.addTemporalSlot(p,m,c)}var g=this.options.custom;for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&this.currentAdContext.addKeyValue(v,g[v]);return this.responsePromise},e.prototype.requestAds=function(e){var t=e.getConfig(),i=tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_NONE;t.autostart&&(i=t.playOnViewable?tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_ATTENDED:tv.freewheel.SDK.VIDEO_ASSET_AUTO_PLAY_TYPE_UNATTENDED);var r=Math.floor(2147483648*Math.random()),n=this.options.freewheel?this.options.freewheel.afid:null;"LIVE"===t.streamType||this.streamType&&"LIVE"===this.streamType.toUpperCase()?(this.currentAdContext.setVideoAsset(this._fwassetid,this._fwduration,null,null,i,r,null,n,tv.freewheel.SDK.VIDEO_ASSET_DURATION_TYPE_VARIABLE),this.currentAdContext.setRequestMode(tv.freewheel.SDK.REQUEST_MODE_LIVE)):this.currentAdContext.setVideoAsset(this._fwassetid,this._fwduration,null,null,i,r,null,n),this.currentAdContext.registerVideoDisplayBase(e.getContainer().id),this.currentAdContext.submitRequest()},e.prototype.destroy=function(){},e}();function O(t,i){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=(r={},r[tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL]="pre",r[tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL]="mid",r[tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL]="post",r[tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY]="overlay",r[tv.freewheel.SDK.TIME_POSITION_CLASS_DISPLAY]="display",r);return{type:t,client:e,adposition:s[n]||function(e){if(e.isBeforePlay()||0===e.getPosition())return"pre";if(e.isBeforeComplete()||e.getPosition()===e.getDuration())return"post";return"mid"}(i),viewable:i.getViewable()}}var b=function(){function t(e,i,r,n,s){var o=this;g(this,t),r.utils.extend(this,r.Events),this.item=e,this.options=i,this.streamType=s,this.player=r,this.utils=r.utils,this.style=r.utils.style,this.environment=r.getEnvironment(),this.instreamProvider=n,this.initAdsManagerPromise=null,this.adsLoadedPromise=null,this.blockingInstreamPlayer=null,this.video=null,this.timeoutAdStart=-1,this.timeoutAdLoad=-1,this.adBlockTimeout=-1,this.progressIntervalId=-1,this.nonlinearContainerId=null,this.slots={prerolls:[],midrolls:[],postrolls:[]},this.playedMidrollIndex=[],this.mobileEventListeners={play:function(e){return o.adResume(e)},pause:function(e){return o.adPause(e)},beginFullscreen:function(e){return o.startFullscreen(e)},endFullscreen:function(e){return o.endFullscreen(e)}},this.playerEventListeners={"idle play pause beforeComplete":this.setVideoState},this.addPlayerListeners(),this._qoe=new r.utils.Timer}return t.prototype.init=function(t,i){var r=this;this.initAdsManagerPromise=_().then(function(){return r.destroyed()?null:(r.adsLoaderManager=new C(r.player.version,r.options,r.streamType),r.player.trigger("adManager",{adManager:r.adsLoaderManager.adsManager}),r.adsLoaderManager)}).catch(function(e){return r.asyncError(e)}),this.adsLoadedPromise=this.initAdsManagerPromise.then(function(){return r.adsLoaderManager.open(t,i,r.player,r.options)}).then(function(t){if(r.destroyed())return null;if(t.success){r.trigger("adRequest",{client:e,networkid:t.response.networkId});var i=r.adsLoaderManager.currentAdContext;r.instreamProvider.setProxy(i);for(var n=i.getTemporalSlots(),s=[],a=0;a<n.length;a++){var l=n[a];switch(l.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:r.slots.prerolls.push(l);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:case tv.freewheel.SDK.TIME_POSITION_CLASS_MIDROLL:r.slots.midrolls.push(l),s.push({begin:l.getTimePosition(),text:r.options.cuetext});break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:r.slots.postrolls.push(l)}}r.player.setCues(s),r.registerEvents(i),i.setParameter(tv.freewheel.SDK.PARAMETER_RENDERER_VIDEO_DISPLAY_CONTROLS_WHEN_PAUSE,!1,tv.freewheel.SDK.PARAMETER_LEVEL_GLOBAL)}else r.asyncError(t);return r.slots.prerolls.length&&r.utils.addClass(r.player.getContainer(),o),t}).catch(function(e){return r.asyncError(e)})},t.prototype.registerEvents=function(e){var t=this;e.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,function(e){return t.adStarted(e)}),e.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,function(e){return t.adSlotComplete(e)}),e.addEventListener(tv.freewheel.SDK.EVENT_AD,function(e){return t.allAdEvent(e)})},t.prototype.startFullscreen=function(e){this.sendFullscreenEvent(e,!0)},t.prototype.endFullscreen=function(e){this.sendFullscreenEvent(e,!1)},t.prototype.sendFullscreenEvent=function(e,t){this.blockingInstreamPlayer&&this.blockingInstreamPlayer.trigger("fullscreenchange",{target:e.target,jwstate:t})},t.prototype.adErrorEventObject=function(t){if(60003===t.adErrorCode)return t;var i=t.adInstance,r=tv?t[tv.freewheel.SDK.INFO_KEY_ERROR_INFO]:"FreeWheel SDK unavailable";return{id:i?i.getAdId():void 0,client:e,message:"Ad Error: "+r,code:t[tv.freewheel.SDK.INFO_KEY_ERROR_CODE],module:t[tv.freewheel.SDK.INFO_KEY_ERROR_MODULE]}},t.prototype.adEventObject=function(t){var i=this.currentSlot,r={client:e};if(i&&(r.tag=i.getCustomId()),!t&&i&&(t=i.getCurrentAdInstance()),!t)return r;var n=i.getTimePositionClass(),s="OVERLAY"===n,o=t.getActiveCreativeRendition();r.freewheel={ad:{adId:t.getAdId()}},r.adposition=n.toLowerCase().replace("roll",""),r.id=t.getAdId(),r.linear=s?"nonlinear":"linear",r.creativetype="static",r.viewable=this.player.getViewable(),s||(r.creativetype="VPAID"===o.getCreativeApi()?"vpaid-js":o.getContentType());var a=i.getAdCount();return a>1&&(r.sequence=i.getAdInstances().indexOf(t),r.podcount=a),t.skipoffset&&(r.skipoffset=t.skipoffset),r},t.prototype.allAdEvent=function(e){switch(e.subType){case tv.freewheel.SDK.EVENT_AD_IMPRESSION:this.adImpression.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_IMPRESSION_END:this.setTimeoutAdStart.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_COMPLETE:this.adComplete.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_CLICK:this.adClick.call(this,e);break;case tv.freewheel.SDK.EVENT_ERROR:this.adError.call(this,e);break;case tv.freewheel.SDK.EVENT_AD_AUTO_PLAY_BLOCKED:this.pause.call(this,e),this.currentSlot&&this.instreamProvider.trigger("playAttemptFailed")}},t.prototype.setupSkipButton=function(e){var t=this.options.config.skipoffset,i="POSTROLL"===e.slot.getTimePositionClass()?-1:e.slot.getTimePosition(),r=this.adsLoaderManager.tagMap;if(r){var n=r[i];n&&(t=n.skipoffset||t)}t&&this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(m,this.adSkip,this),e.adInstance.skipoffset=t,this.blockingInstreamPlayer.setupSkipButton(t,this.options,this.utils.noop),this.blockingInstreamPlayer.on(m,this.adSkip,this))},t.prototype.adStarted=function(e){var t=this;this.instreamProvider.trigger("state",{newstate:h,oldstate:"buffering"});var i=e.slot.getTimePositionClass();i!==tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY&&(this.player.trigger(u,O(u,this.player,i)),this.blockingInstreamPlayer.on("destroyed",function(){t.player.trigger(c,O(c,t.player,i))}))},t.prototype.adImpression=function(e){clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout);var t=e.adInstance,i=this.adEventObject(t),r="VPAID"===t.getActiveCreativeRendition().getCreativeApi();if(this.utils.removeClass(this.player.getContainer(),a),this.utils.toggleClass(this.player.getContainer(),l,r),this.isPreroll(i)&&(this._qoe.tick("adImpression"),i.timeLoading=this._qoe.between("adLoading","adImpression")),this.updateAdPosition(t),this.progressInterval(this.currentSlot),this.setupSkipButton(e),this.setupNonlinearContainer(),this.resize(),this.trigger("adImpression",i),r&&this.trigger("adStarted",i),t.getCompanionAdInstances().length){var n=this.utils.extend({},i);n.companions=t.getCompanionAdInstances(),this.trigger("adCompanions",n)}this.triggerAdPlay(e.adInstance,f,h,"buffering")},t.prototype.setTimeoutAdStart=function(){var e=this;clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),this.timeoutAdStart=setTimeout(function(){if(!e.destroyed()){var t=e.adEventObject();t.message="Ad Error: Creative timeout",e.trigger(p,t),e.currentSlot.skipCurrentAd()}},this.options.loadVideoTimeout)},t.prototype.setAdBlockTimeout=function(){var t=this;this.player.getAdBlock()&&(clearTimeout(this.adBlockTimeout),this.adBlockTimeout=setTimeout(function(){t.destroyed()||t.adError({id:void 0,client:e,message:"Ad playback blocked by an ad blocker",code:900,adErrorCode:60003})},this.options.adBlockTimeout))},t.prototype.setVideoState=function(e){var t=e.type;if(this.adsLoaderManager&&this.adsLoaderManager.currentAdContext){var i={idle:tv.freewheel.SDK.VIDEO_STATE_STOPPED,play:tv.freewheel.SDK.VIDEO_STATE_PLAYING,pause:tv.freewheel.SDK.VIDEO_STATE_PAUSED,beforeComplete:tv.freewheel.SDK.VIDEO_STATE_COMPLETED};this.adsLoaderManager.currentAdContext.setVideoState(i[t])}},t.prototype.adResume=function(e){var t=e?e.adInstance:null;this.triggerAdPlay(t,f,h,d)},t.prototype.adPause=function(e){if(!this.environment.OS.mobile||this.video.duration!==this.video.currentTime){var t=e?e.adInstance:null;this.triggerAdPlay(t,f,d,h)}},t.prototype.adSkip=function(){this.trigger(m,this.adEventObject()),this.currentSlot.skipCurrentAd()},t.prototype.adComplete=function(e){clearInterval(this.progressIntervalId),this.trigger("adComplete",this.adEventObject(e.adInstance))},t.prototype.adSlotComplete=function(e){var t=this,i=e.slot;i&&"POSTROLL"===i.getTimePositionClass()?setTimeout(function(){t.stopBlocking(),t.nonlinearContainerId=null,t.destroy()},0):(this.stopBlocking(),this.nonlinearContainerId=null)},t.prototype.adClick=function(e){this.trigger("adClick",this.adEventObject(e.adInstance)),this.pause(e)},t.prototype.adError=function(e){var t=this;this.options.debug&&console.error(e);var i=this.adErrorEventObject(e);900===i.code&&(this.timeoutAdStart=setTimeout(function(){return t.destroy()},0));var r=e?e.adInstance:null;r&&this.isPreroll(this.adEventObject(r))&&(this._qoe.tick("adError"),i.timeLoading=this._qoe.between("adLoading","adError")),this.trigger(p,i)},t.prototype.updateAdPosition=function(e){this.instreamProvider&&this.instreamProvider.trigger("time",{position:Math.max(e.getPlayheadTime(),0),duration:e.getDuration()})},t.prototype.prepareToPlayAd=function(){this.destroyed()||this.blockingInstreamPlayer||this.startBlocking()},t.prototype.addMobileListeners=function(){var e=this;Object.keys(this.mobileEventListeners).forEach(function(t){e.video.addEventListener(t,e.mobileEventListeners[t])})},t.prototype.removeMobileListeners=function(){var e=this;Object.keys(this.mobileEventListeners).forEach(function(t){e.video.removeEventListener(t,e.mobileEventListeners[t])})},t.prototype.addPlayerListeners=function(){this.player.on(this.playerEventListeners,this)},t.prototype.removePlayerListeners=function(){this.player.off(this.playerEventListeners,this)},t.prototype.startBlocking=function(){var e=this;if(!this.blockingInstreamPlayer){this._qoe.tick("adLoading"),clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.timeoutAdLoad=setTimeout(function(){if(!e.destroyed()){e.currentSlot&&e.currentSlot.stop();var t=e.adEventObject();t.message="Ad Error: Request timeout",e.trigger(p,t),e.stopBlocking()}},this.options.requestTimeout),this.utils.addClass(this.player.getContainer(),o),this.blockingInstreamPlayer=this.player.createInstream().init(),this.video=this.blockingInstreamPlayer.getMediaElement();var t=this.player.getConfig().localization.loadingAd;this.blockingInstreamPlayer.setText(t),this.blockingInstreamPlayer.applyProviderListeners(this.instreamProvider),this.environment.OS.mobile&&(this.removeMobileListeners(),this.addMobileListeners())}},t.prototype.stopBlocking=function(){this.destroyed()||(clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.utils.removeClass(this.player.getContainer(),[l,o,a]),this.environment.OS.mobile&&this.removeMobileListeners(),this.blockingInstreamPlayer&&(this.instreamProvider.off(),this.blockingInstreamPlayer.destroy(),this.blockingInstreamPlayer=null,this.video=null))},t.prototype.setupNonlinearContainer=function(){if(this.nonlinearContainerId){var e=document.getElementById(this.nonlinearContainerId);this.utils.addClass(e,"jw-freewheel-nonlinear-container"),this.style(e,{top:"auto",height:"100%",width:"100%"})}},t.prototype.beforePlay=function(){var e=this;this.startBlocking(),this.utils.addClass(this.player.getContainer(),a),this.initAdsManagerPromise.then(function(){e.setAdBlockTimeout(),e.adsLoaderManager.requestAds(e.player)}),this.adsLoadedPromise.then(function(t){!e.destroyed()&&t.success&&e.playNextAd(e.slots.prerolls)}).catch(function(t){return e.asyncError(t)})},t.prototype.playNextAd=function(e){if(e.length){var t=this.currentSlot=e.shift();"OVERLAY"!==t.getTimePositionClass()?(this.prepareToPlayAd(),this.nonlinearContainerId=null):(this.utils.addClass(this.player.getContainer(),o),this.nonlinearContainerId="_fw_ad_container_html_"+this.currentSlot.getCustomId()+"_"),this.setTimeoutAdStart(),t.play(),"MIDROLL"===t.getTimePositionClass()&&this.setVideoState({type:"pause"})}else this.stopBlocking()},t.prototype.beforeComplete=function(){this.slots.postrolls.length&&this.playNextAd(this.slots.postrolls)},t.prototype.time=function(e){if(this.slots.midrolls.length){var t=this.getNextMidRollIndex(e.position);if(t>=0){var i=[this.slots.midrolls[t]];this.playNextAd(i)}}},t.prototype.progressInterval=function(e){var t=this;if(clearInterval(this.progressIntervalId),e){var i=e.getCurrentAdInstance(),r=e.getAdInstances().indexOf(i)+1,n=i.getDuration(),s=e.getAdCount(),o=-1,a=this.options.admessage||"",l=new RegExp(this.options.admessagedynamickey,"g"),d=this.options.adcounterdynamic||"",h=new RegExp(this.options.adcountercountkey,"g"),u=new RegExp(this.options.adcountertotalkey,"g");this.progressIntervalId=setInterval(function(){var e=i.getPlayheadTime(),c=n-e;if(o!==c){if(o=c,t.blockingInstreamPlayer){var p=a.replace(l,Math.round(c));s>1&&(p=d.replace(h,r).replace(u,s)+"  "+p),t.blockingInstreamPlayer.setText(p)}if(n>0){var f=t.adEventObject(i);f.position=e,f.duration=n,t.trigger("adTime",f),t.updateAdPosition(i)}}},250)}},t.prototype.getNextMidRollIndex=function(e){var t=-1;if(this.playedMidrollIndex.length>=this.slots.midrolls.length)return t;for(var i=0;i<this.slots.midrolls.length;i++){if(!(this.slots.midrolls[i].getTimePosition()<=e))break;t=i}return this.playedMidrollIndex.indexOf(t)<0&&t>=0?(this.playedMidrollIndex.push(t),t):-1},t.prototype.triggerAdPlay=function(e,t,i,r){this.instreamProvider.trigger("state",{newstate:i,oldstate:r});var n=this.adEventObject(e);n.oldstate=r,n.newstate=i,this.trigger(t,n)},t.prototype.asyncError=function(e){var t=this;this.destroyed()||(e&&this.adError(e),this.timeoutAdStart=setTimeout(function(){return t.destroy()},0))},t.prototype.pause=function(e){if(this.currentSlot){this.currentSlot.pause();var t=e?e.adInstance:null;this.triggerAdPlay(t,"adPause",d,h)}},t.prototype.resume=function(e){if(this.currentSlot){this.currentSlot.resume();var t=e?e.adInstance:null;this.triggerAdPlay(t,f,h,d)}},t.prototype.resize=function(){var e=document.getElementById(this.nonlinearContainerId);if(e){var t=e.querySelector("iframe"),i=this.player.getSafeRegion(!0);this.style(t,{left:(i.width-t.offsetWidth)/2})}},t.prototype.destroy=function(){clearInterval(this.progressIntervalId),this.off(),this.destroyed()||(this.removePlayerListeners(),this.currentSlot&&this.currentSlot.stop(),this.blockingInstreamPlayer&&(this.blockingInstreamPlayer.off(null,null,this),this.stopBlocking()),this.adsLoaderManager&&this.adsLoaderManager.destroy(),clearTimeout(this.timeoutAdLoad),clearTimeout(this.timeoutAdStart),clearTimeout(this.adBlockTimeout),this.nonlinearContainerId=null,this.item=null,this.options=null,this.player.off(null,null,this),this.player=null,this.instreamProvider.off(),this.instreamProvider.setProxy(null),this.instreamProvider=null,this.video=null,this.initAdsManagerPromise=null,this.adsLoadedPromise=null)},t.prototype.destroyed=function(){return!this.item},t.prototype.isPreroll=function(e){return"pre"===e.adposition&&(void 0===e.podcount||0===e.sequence)},t}();!function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");t.setAttribute("media","screen"),t.innerHTML=e,document.head.appendChild(t)}}(".jwplayer.jw-flag-ads-freewheel.jw-freewheel-before-impression .jw-media video{pointer-events:none}.jwplayer.jw-flag-ads-freewheel.jw-flag-touch.jwplayer.jw-flag-ads-freewheel.jw-state-paused .jw-display-icon-container{display:none}.jwplayer.jw-flag-ads-freewheel.jw-flag-user-inactive.jw-state-playing .jw-freewheel-nonlinear-container{bottom:.5em}.jwplayer.jw-flag-ads-freewheel .jw-freewheel-nonlinear-container{bottom:3.5em;pointer-events:none}.jwplayer.jw-flag-ads-freewheel .jw-freewheel-nonlinear-container iframe{pointer-events:all}.jwplayer.jw-flag-ads-freewheel.jw-flag-time-slider-above .jw-freewheel-nonlinear-container{bottom:66px}");(window.jwplayerPluginJsonp||window.jwplayer().registerPlugin)(e,"8.1",function(r,n){var s=this,o=r.utils,a=r.getConfig(),l=a.key,d=new v(a,n||{}),h=new A(o,r.Events),u=0;_(o,d.adManagerURL).then(function(){d.debug?tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_DEBUG):tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_QUIET)}).catch(o.noop);var c=null;o.extend(this,r.Events),this.version="2.1.8";function f(){c&&!c.destroyed()&&(c.destroy(),c=null)}function m(e){f(),e&&e.adschedule?d.adschedule=e.adschedule:d.adschedule=null,r.setCues([])}function g(e,t,i,n){var s=e.item;m(s),function(){var e=d.getAdRules(),t=0===e.frequency&&1===u,i=u>=e.startOn&&(u-e.startOn)%e.frequency==0;return t||i}()?i.getSchedule()&&(i.fwassetid=s.fwassetid||i.fwassetid,(c=new b(s,d,r,h,n)).init(t,i),c.on("all",function(e,t){return r.trigger(e,t)}),r.once("beforePlay",function(e){return c.beforePlay(e)},c).on("beforeComplete",function(){return c.beforeComplete()},c).on("time",function(e){return c.time(e)},c).on("resize",function(){return c.resize()},c).on("fullscreen",function(){return c.resize()},c)):d.adschedule=null}r.pauseAd=function(e){c&&(e?c.pause():c.resume())},r.on("ready",function(){_().catch(function(){y("Ad playback blocked by an ad blocker",2e4)}),E.catch(function(e){y("Ad Error: "+e.message,60002)})},this).on("playlistItem",function(e){u++;var i=e.item.streamtype||a.streamtype;g(e,t,d,i)},this).on("playlistComplete",function(){m()},this).on("cast",function(e){e.active&&m()},this).on("destroyPlugin",function(){s.destroy()},this);var y=function(t,n){f(),r.off(null,null,s),r.playAd=o.noop,r.trigger(p,{id:i,client:e,message:t,code:900,adErrorCode:n,tag:""})},E=w.call(this,o,l);E.catch(o.noop),this.destroy=f})}();
